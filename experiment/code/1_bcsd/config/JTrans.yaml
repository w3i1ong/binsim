name: jTrans

common:
  record-dir: "./record/jTrans"
  log:
    level: "info"
    file: True

model:
  type: "JTrans"
  kwargs:
    pretrained_weights: "/home/anonymous/Documents/binsim/data/jTrans-models/jTrans-pretrained"

dataset:
  type: 'JTransSeq'
  path: '/home/anonymous/Documents/binsim-dataset/processed/trex/'
  name: 'default'
  merge: 'default'


train:
  general:
    epoch: 50
    backward-steps: 1
    gpu: 1
    mixed-precision: False
    num-workers: 10
    batch-size: 250
    choice-metric: 'auc'

  sampler:
    type: semi-hard-pair
    kwargs:

  optimizer:
    type: 'adamW'
    lr: 0.001
    kwargs:
    lr-update-epoch:
    lr-update-scale:


  evaluation:
    val-interval: 10
    batch-size:
      classification: 128
      search: 256
    metrics:
      - 'auc'
      - 'recall@1'
      - 'mrr@10'
      - 'hit@10'
      - 'recall@10'
      - 'nDCG@10'

test:
  model:
    model-source: 'pretrained'
    pretrained-weights: "/home/anonymous/Documents/binsim/data/jTrans-models/jTrans-finetune"
  general:
    gpu: 3
    mixed-precision: False
    num-workers: 10
    batch-size:
      classification: 32
      search: 64
    pool-size: 1000
    test-times: 5
    random-seed: 0
  evaluation:
    metrics:
      - 'recall@1'
      - 'mrr@10'
      - 'hit@10'
      - 'recall@10'
      - 'nDCG@10'
    combinations:
      x64-O0-O3:
        - '0:x64:linux:ukn-ukn:O0'
        - '0:x64:linux:ukn-ukn:O3'
      x64-O1-O3:
        - '0:x64:linux:ukn-ukn:O1'
        - '0:x64:linux:ukn-ukn:O3'
      x64-O2-O3:
        - '0:x64:linux:ukn-ukn:O2'
        - '0:x64:linux:ukn-ukn:O3'

